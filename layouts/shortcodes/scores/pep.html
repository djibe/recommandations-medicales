<div id="score-pep">
  <h3 class="card-title mb-2">Score PEP - Premature Ejaculation Profile</h3>
  <p>Score <abbr title="Premature Ejaculation Profile" lang="en">PEP</abbr> (<span lang="en">Premature Ejaculation Profile</span>) pour l’évaluation de l’éjaculation précoce.</p>
  <p>Veuillez répondre aux questions en pensant à votre activité sexuelle actuelle.</p>
  <fieldset>
    <legend>1. En ce qui concerne vos rapports sexuels au cours du dernier mois, vous diriez que votre satisfaction a été:</legend>
    <input type="radio" id="radio11" name="radio1" class="d-input-none" value="1" required>
    <label for="radio11" class="chip chip-action chip-sm chip-choice">Très mauvaise</label>
    <input type="radio" id="radio12" name="radio1" class="d-input-none" value="2">
    <label for="radio12" class="chip chip-action chip-sm chip-choice">Mauvaise</label>
    <input type="radio" id="radio13" name="radio1" class="d-input-none" value="3">
    <label for="radio13" class="chip chip-action chip-sm chip-choice">Correcte</label>
    <input type="radio" id="radio14" name="radio1" class="d-input-none" value="4">
    <label for="radio14" class="chip chip-action chip-sm chip-choice">Bonne</label>
    <input type="radio" id="radio15" name="radio1" class="d-input-none" value="5">
    <label for="radio15" class="chip chip-action chip-sm chip-choice">Très bonne</label>
  </fieldset>
  <fieldset>
    <legend>2. Au cours du dernier mois votre contrôle de l’éjaculation au cours de vos rapports sexuels a été:</legend>
    <input type="radio" id="radio21" name="radio2" class="d-input-none" value="1" required>
    <label for="radio21" class="chip chip-action chip-sm chip-choice">Très mauvais</label>
    <input type="radio" id="radio22" name="radio2" class="d-input-none" value="2">
    <label for="radio22" class="chip chip-action chip-sm chip-choice">Mauvais</label>
    <input type="radio" id="radio23" name="radio2" class="d-input-none" value="3">
    <label for="radio23" class="chip chip-action chip-sm chip-choice">Correct</label>
    <input type="radio" id="radio24" name="radio2" class="d-input-none" value="4">
    <label for="radio24" class="chip chip-action chip-sm chip-choice">Bon</label>
    <input type="radio" id="radio25" name="radio2" class="d-input-none" value="5">
    <label for="radio25" class="chip chip-action chip-sm chip-choice">Très bon</label>
  </fieldset>
  <fieldset>
    <legend>3. Au cours du dernier mois, la rapidité avec laquelle vous avez éjaculé lors de vos rapports sexuels avec pénétration vous-a-t-elle contrarié ?</legend>
    <input type="radio" id="radio31" name="radio3" class="d-input-none" value="0" required>
    <label for="radio31" class="chip chip-action chip-sm chip-choice">Pas du tout</label>
    <input type="radio" id="radio32" name="radio3" class="d-input-none" value="1">
    <label for="radio32" class="chip chip-action chip-sm chip-choice">Un peu</label>
    <input type="radio" id="radio33" name="radio3" class="d-input-none" value="2">
    <label for="radio33" class="chip chip-action chip-sm chip-choice">Modérément</label>
    <input type="radio" id="radio34" name="radio3" class="d-input-none" value="3">
    <label for="radio34" class="chip chip-action chip-sm chip-choice">Beaucoup</label>
    <input type="radio" id="radio35" name="radio3" class="d-input-none" value="4">
    <label for="radio35" class="chip chip-action chip-sm chip-choice">Extrêmement</label>
  </fieldset>
  <fieldset>
    <legend>4. Au cours du dernier mois, la rapidité avec laquelle vous avez éjaculé lors de vos rapports sexuels avec pénétration a-t-elle compliqué vos relations avec votre partenaire ?</legend>
    <input type="radio" id="radio41" name="radio4" class="d-input-none" value="0" required>
    <label for="radio41" class="chip chip-action chip-sm chip-choice">Pas du tout</label>
    <input type="radio" id="radio42" name="radio4" class="d-input-none" value="1">
    <label for="radio42" class="chip chip-action chip-sm chip-choice">Un peu</label>
    <input type="radio" id="radio43" name="radio4" class="d-input-none" value="2">
    <label for="radio43" class="chip chip-action chip-sm chip-choice">Modérément</label>
    <input type="radio" id="radio44" name="radio4" class="d-input-none" value="3">
    <label for="radio44" class="chip chip-action chip-sm chip-choice">Beaucoup</label>
    <input type="radio" id="radio45" name="radio4" class="d-input-none" value="4">
    <label for="radio45" class="chip chip-action chip-sm chip-choice">Extrêmement</label>
  </fieldset>
  <div class="alert bg-light d-flex mt-md-4">
    <div class="d-flex flex-column align-items-center">
      <p class="typography-overline score-output-title">Score PEP</p>
      <output class="score-output" id="PEPScore">0</output>
    </div>
    <p id="PEPText" class="lead m-auto">Veuillez répondre à toutes les questions</p>
  </div>
</div>
<blockquote class="mt-4">
  <p><a href="https://pubmed.ncbi.nlm.nih.gov/18793300/" rel="external nofollow noopener">Patrick DL, Giuliano F, Ho KF, Gagnon DD, McNulty P, Rothman M. The Premature Ejaculation Profile: validation of self-reported outcome measures for research and practice. BJU Int. 2009;103(3):358-364. doi:10.1111/j.1464-410X.2008.08041.x</a>
  et <a href="https://pubmed.ncbi.nlm.nih.gov/16422867/" rel="external nofollow noopener">Patrick DL, Althof SE, Pryor JL, et al. Premature ejaculation: an observational study of men and their partners. J Sex Med. 2005;2(3):358-367. doi:10.1111/j.1743-6109.2005.20353.x</a>
  </p>
</blockquote>
{{ $script := `
  // Score PEP by djibe
  window.addEventListener( 'load', event => {
    const scorePEP = document.getElementById('PEPScore')
    const textPEP = document.getElementById('PEPText');
    [...document.querySelectorAll('#score-pep input[type=\"radio\"]')].forEach((elem) => { elem.addEventListener('click', () => { calcPEP() }) })
    const calcPEP = () => {
      let score = 0
      const elemsChecked = document.querySelectorAll('#score-pep input[type=\"radio\"]:checked')
      elemsChecked.forEach(elemChecked => {
        score += parseInt(elemChecked.value, 10)
        if (elemsChecked.length === 4) {
          scorePEP.innerHTML = score
          // TODO:
          if (score) {
            textPEP.innerHTML = 'Bibliographie non explicite'
          }
        } else {
          textPEP.innerHTML = 'Veuillez répondre à toutes les questions'
        }
      })
    }
  })` }}
<script type="module">{{ $script | safeJS }}</script>