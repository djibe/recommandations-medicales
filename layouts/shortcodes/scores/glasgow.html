<div class="card my-3 my-xl-5">
  <ul class="nav nav-tabs nav-justified" id="justifiedTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button aria-controls="plus5" aria-selected="true" class="nav-link active" data-toggle="tab" data-target="#plus5" id="cinqplus-tab" type="button" role="tab">5 ans et +</button></li>
    <li class="nav-item" role="presentation">
      <button aria-controls="deuxcinq" aria-selected="false" class="nav-link" data-toggle="tab" data-target="#deuxcinq" id="deuxcinq-tab" type="button" role="tab">2 à 5 ans</button></li>
    <li class="nav-item" role="presentation">
      <button aria-controls="zerodeux" aria-selected="false" class="nav-link" data-toggle="tab" data-target="#zerodeux" id="zerodeux-tab" type="button" role="tab">0 à 2 ans</button></li>
  </ul>
  <div class="card-body tab-content" id="score-glasgow">
    <div aria-labelledby="cinqplus-tab" class="tab-pane fade show active" id="plus5" role="tabpanel">
      <form class="my-4 form" autocomplete="off">
        <h4 class="card-title mb-lg-4">Échelle de Glasgow standard</h4>
        <div class="row">
          <div class="col-sm">
            <div class="form-group">
              <p class="font-weight-bold">Ouverture des yeux</p>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio11" name="radio1" class="custom-control-input" value="4" required>
                <label class="custom-control-label" for="radio11">4 - Spontanément</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio12" name="radio1" class="custom-control-input" value="3">
                <label class="custom-control-label" for="radio12">3 - Aux stimuli verbaux</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio13" name="radio1" class="custom-control-input" value="2">
                <label class="custom-control-label" for="radio13">2 - Aux stimuli douloureux</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio14" name="radio1" class="custom-control-input" value="1">
                <label class="custom-control-label" for="radio14">1 - Aucune réponse</label>
              </div>
            </div>
          </div>
          <div class="col-sm">
            <div class="form-group">
              <p class="font-weight-bold">Réponse verbale</p>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio211" name="radio2" class="custom-control-input" value="5" required>
                <label class="custom-control-label" for="radio211">5 - Est orienté et parle</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio21" name="radio2" class="custom-control-input" value="4">
                <label class="custom-control-label" for="radio21">4 - Est désorienté et parle</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio22" name="radio2" class="custom-control-input" value="3">
                <label class="custom-control-label" for="radio22">3 - Paroles inappropriées</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio23" name="radio2" class="custom-control-input" value="2">
                <label class="custom-control-label" for="radio23">2 - Sons incompréhensibles</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio24" name="radio2" class="custom-control-input" value="1">
                <label class="custom-control-label" for="radio24">1 - Aucune réponse</label>
              </div>
            </div>
          </div>
          <div class="col-sm">
            <div class="form-group">
              <p class="font-weight-bold">Réponse motrice</p>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio31" name="radio3" class="custom-control-input" value="6" required>
                <label class="custom-control-label" for="radio31">6 - Répond aux demandes</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio32" name="radio3" class="custom-control-input" value="5">
                <label class="custom-control-label" for="radio32">5 - Localise la douleur</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio33" name="radio3" class="custom-control-input" value="4">
                <label class="custom-control-label" for="radio33">4 - Se retire à la douleur</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio34" name="radio3" class="custom-control-input" value="3">
                <label class="custom-control-label" for="radio34">3 - Flexion à la douleur</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio35" name="radio3" class="custom-control-input" value="2">
                <label class="custom-control-label" for="radio35">2 - Extension à la douleur</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio36" name="radio3" class="custom-control-input" value="1">
                <label class="custom-control-label" for="radio36">1 - Aucune réponse</label>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div aria-labelledby="deuxcinq-tab" class="tab-pane fade" id="deuxcinq" role="tabpanel">
      <form class="my-4 form" autocomplete="off">
        <h4 class="card-title mb-lg-4">Échelle de Glasgow de 2 à 5 ans</h4>
        <div class="row">
          <div class="col-sm">
            <div class="form-group">
              <p class="font-weight-bold">Ouverture des yeux</p>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio111" name="radio11" class="custom-control-input" value="4" required>
                <label class="custom-control-label" for="radio111">4 - Spontanément</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio112" name="radio11" class="custom-control-input" value="3">
                <label class="custom-control-label" for="radio112">3 - Aux stimuli verbaux</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio113" name="radio11" class="custom-control-input" value="2">
                <label class="custom-control-label" for="radio113">2 - Aux stimuli douloureux</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio114" name="radio11" class="custom-control-input" value="1">
                <label class="custom-control-label" for="radio114">1 - Aucune réponse</label>
              </div>
            </div>
          </div>
          <div class="col-sm">
            <div class="form-group">
              <p class="font-weight-bold">Réponse verbale</p>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio211a" name="radio21" class="custom-control-input" value="5" required>
                <label class="custom-control-label" for="radio211a">5 - Mots appropriés, sourit, fixe, suit du regard</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio212" name="radio21" class="custom-control-input" value="4">
                <label class="custom-control-label" for="radio212">4 - Mots appropriés, pleure, est consolable</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio213" name="radio21" class="custom-control-input" value="3">
                <label class="custom-control-label" for="radio213">3 - Hurle, est inconsolable</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio214" name="radio21" class="custom-control-input" value="2">
                <label class="custom-control-label" for="radio214">2 - Gémit aux stimuli douloureux</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio215" name="radio21" class="custom-control-input" value="1">
                <label class="custom-control-label" for="radio215">1 - Aucune réponse</label>
              </div>
            </div>
          </div>
          <div class="col-sm">
            <div class="form-group">
              <p class="font-weight-bold">Réponse motrice</p>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio311" name="radio31" class="custom-control-input" value="6" required>
                <label class="custom-control-label" for="radio311">6 - Répond aux demandes</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio321" name="radio31" class="custom-control-input" value="5">
                <label class="custom-control-label" for="radio321">5 - Localise la douleur</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio331" name="radio31" class="custom-control-input" value="4">
                <label class="custom-control-label" for="radio331">4 - Se retire à la douleur</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio341" name="radio31" class="custom-control-input" value="3">
                <label class="custom-control-label" for="radio341">3 - Flexion à la douleur</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio351" name="radio31" class="custom-control-input" value="2">
                <label class="custom-control-label" for="radio351">2 - Extension à la douleur</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio361" name="radio31" class="custom-control-input" value="1">
                <label class="custom-control-label" for="radio361">1 - Aucune réponse</label>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div aria-labelledby="zerodeux-tab" class="tab-pane fade" id="zerodeux" role="tabpanel">
      <form class="my-4 form" autocomplete="off">
        <h4 class="card-title mb-lg-4">Échelle de Glasgow de 0 à 2 ans</h4>
        <div class="row">
          <div class="col-sm">
            <div class="form-group">
              <p class="font-weight-bold">Ouverture des yeux</p>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio1111" name="radio111" class="custom-control-input" value="4" required>
                <label class="custom-control-label" for="radio1111">4 - Spontanément</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio1112" name="radio111" class="custom-control-input" value="3">
                <label class="custom-control-label" for="radio1112">3 - Aux stimuli verbaux</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio1113" name="radio111" class="custom-control-input" value="2">
                <label class="custom-control-label" for="radio1113">2 - Aux stimuli douloureux</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio1114" name="radio111" class="custom-control-input" value="1">
                <label class="custom-control-label" for="radio1114">1 - Aucune réponse</label>
              </div>
            </div>
          </div>
          <div class="col-sm">
            <div class="form-group">
              <p class="font-weight-bold">Réponse verbale</p>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio2111" name="radio211" class="custom-control-input" value="5" required>
                <label class="custom-control-label" for="radio2111">5 - Agit normalement</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio2112" name="radio211" class="custom-control-input" value="4">
                <label class="custom-control-label" for="radio2112">4 - Pleure</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio2113" name="radio211" class="custom-control-input" value="3">
                <label class="custom-control-label" for="radio2113">3 - Hurlements inappropriés</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio2114" name="radio211" class="custom-control-input" value="2">
                <label class="custom-control-label" for="radio2114">2 - Gémissements (grunting)</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio2115" name="radio211" class="custom-control-input" value="1">
                <label class="custom-control-label" for="radio2115">1 - Aucune réponse</label>
              </div>
            </div>
          </div>
          <div class="col-sm">
            <div class="form-group">
              <p class="font-weight-bold">Réponse motrice</p>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio3111" name="radio311" class="custom-control-input" value="6" required>
                <label class="custom-control-label" for="radio3111">6 - Mouvements spontanés intentionnels</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio3121" name="radio311" class="custom-control-input" value="5">
                <label class="custom-control-label" for="radio3121">5 - Se retire au toucher</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio3131" name="radio311" class="custom-control-input" value="4">
                <label class="custom-control-label" for="radio3131">4 - Se retire à la douleur</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio3141" name="radio311" class="custom-control-input" value="3">
                <label class="custom-control-label" for="radio3141">3 - Flexion à la douleur</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio3151" name="radio311" class="custom-control-input" value="2">
                <label class="custom-control-label" for="radio3151">2 - Extension à la douleur</label>
              </div>
              <div class="custom-control custom-radio">
                <input type="radio" id="radio3161" name="radio311" class="custom-control-input" value="1">
                <label class="custom-control-label" for="radio3161">1 - Aucune réponse</label>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="alert bg-light d-flex mb-0">
    <div class="d-flex flex-column align-items-center">
      <p class="typography-overline score-output-title">Score de Glasgow</p>
      <output class="score-output" id="glasgowScore">0</output>
    </div>
    <p id="glasgowText" class="lead m-auto">Compléter les 3 parties.</p>
  </div>
</div>
{{ $script := `
  // Score de Glasgow by djibe
  document.addEventListener( 'DOMContentLoaded', event => {
    const scoreElem = document.getElementById('glasgowScore')
    const textElem = document.getElementById('glasgowText')
    const radioElems = document.querySelectorAll('#score-glasgow input[type=\"radio\"]')
    const panels = document.querySelectorAll('.nav-tabs .nav-link')
    const forms = document.getElementsByClassName('form')
    radioElems.forEach((radioElem) => { radioElem.addEventListener('change', () => {
      count()
    }) })
    // Reset counter on tab switch
    panels.forEach((panel) => { panel.addEventListener('click', () => {
        reset()
      })
    })
    const reset = () => {
      radioElems.forEach(radio => {
        radio.checked = false
        scoreElem.innerHTML = 0
        textElem.innerHTML = 'Compléter les 3 parties.'
      })
    }
    const count = () => {
      let score = 0
      const radioElemsChecked = document.querySelectorAll('input[type=\"radio\"]:checked')
      if (radioElemsChecked.length >= 3) {
        radioElemsChecked.forEach(radioChecked => {
        score += parseInt(radioChecked.value, 10)
        scoreElem.innerHTML = score
        if (score === 15) {
          textElem.innerHTML = 'Conscience normale'
        } else if (score >= 10 && score <= 14) {
          textElem.innerHTML = 'Somnolence ou coma léger'
        } else if (score >= 7 && score <= 9) {
          textElem.innerHTML = 'Coma lourd'
        } else if (score >= 3 && score <= 6) {
          textElem.innerHTML = 'Coma profond'
        } else {
          textElem.innerHTML = 'Compléter les 3 parties.'
        }
        })
      }
    }
  })` }}
<script>{{ $script | safeJS }}</script>